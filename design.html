<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BoardCast – Interactive Mock v3 (spec-updated)</title>
<style>
  :root{
    --ink:#101010;
    --bg:#fafafa;
    --board:#eaf2e4;
    --note-yellow:#fff3b0;
    --note-pink:#ffd6e7;
    --note-mint:#ccf3e2;
    --note-lav:#e9dcff;
    --note-blue:#d7ecff;
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:var(--bg);
    font-family: ui-rounded, "Apple SD Gothic Neo","Noto Sans KR","Inter","Segoe UI",system-ui, -apple-system, sans-serif;
    color:var(--ink);
    display:flex; align-items:center; justify-content:center; min-height:100vh;
  }
  .phone{ width:424px; height:695px; background:#fff; border:2.5px solid var(--ink); border-radius:22px; overflow:hidden;
    position:relative; box-shadow:0 12px 30px rgba(0,0,0,.12); }
  header{ display:flex; align-items:center; justify-content:space-between; padding:14px 16px 6px; border-bottom:2px solid var(--ink); }
  .hdr-left{display:flex; align-items:center; gap:10px;}
  .iconbtn{ width:28px; height:28px; display:grid; place-items:center; border:2px solid var(--ink);
    border-radius:6px; background:#fff; cursor:pointer; }
  .iconbtn:active{ transform:translateY(1px); }
  .title{ font-size:28px; font-weight:800; letter-spacing:.5px; }
  .avatarbtn{ width:34px; height:34px; border:2px solid var(--ink); border-radius:50%; background:#f7f7f2;
    display:grid; place-items:center; cursor:pointer; }
  .avatarbtn:active{ transform:translateY(1px); }
  .avatarbtn .ring{ width:18px; height:18px; border:2px solid var(--ink); border-radius:50%; margin-bottom:-1px; }
  .avatarbtn .base{ width:20px; height:8px; border:2px solid var(--ink); border-top:none; border-radius:0 0 10px 10px; }

  .today{ margin:12px auto 6px; width:max-content; position:relative; background:#fff; border:2px solid var(--ink);
    border-radius:12px; padding:7px 14px; font-weight:700; }
  .today::after{ content:""; position:absolute; left:18px; bottom:-9px; width:16px; height:16px; background:#fff;
    border-left:2px solid var(--ink); border-bottom:2px solid var(--ink); transform:rotate(45deg); }

  .hero{ display:grid; grid-template-columns:repeat(3, 1fr); gap:10px; padding:0 16px; }
  .note{ position:relative; min-height:132px; border:2.5px solid var(--ink); border-radius:8px; padding:10px 10px 26px;
    box-shadow:0 2px 0 0 var(--ink); cursor:pointer; transition:transform .1s; }
  .note:hover{ transform:translateY(-2px); }
  .note[data-color="yellow"]{ background:var(--note-yellow) }
  .note[data-color="pink"]{ background:var(--note-pink) }
  .note[data-color="mint"]{ background:var(--note-mint) }
  .note[data-color="lav"]{ background:var(--note-lav) }
  .note[data-color="blue"]{ background:var(--note-blue) }
  /* remove glossy corner sticker */
  .note::after{ content:none; }
  /* top pins for hero notes */
  .hero .note::before{ content:""; position:absolute; top:-6px; left:50%; transform:translateX(-50%);
    width:11px; height:11px; background:#fff; border:2px solid var(--ink); border-radius:50%; }
  .pin{ position:absolute; top:-6px; left:50%; transform:translateX(-50%); width:11px; height:11px; background:#fff;
    border:2px solid var(--ink); border-radius:50%; }

  .board-wrap{ margin:14px 16px 72px; background:var(--board); border:2px solid var(--ink);
    border-radius:20px; padding:16px; max-height:360px; overflow:auto; -webkit-overflow-scrolling:touch; }
  .grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:14px; }
  .note.small{ min-height:112px; }
  .catline{ font-size:11px; font-weight:800; color:#7a7a7a; opacity:.9; margin-bottom:2px; }
  .hero .catline{ display:none; }
  .meta{ font-size:13px; font-weight:900; margin-bottom:4px; line-height:1.2; word-break:break-word; }
  .preview{ font-size:12.5px; line-height:1.35; display:-webkit-box; -webkit-line-clamp:3; line-clamp:3; -webkit-box-orient:vertical; overflow:hidden; word-break:break-word; }
  /* Hide body preview on small feed notes */
  .note.small .preview{ display:none; }
  
  .footer{ position:absolute; left:8px; right:8px; bottom:6px; display:flex; justify-content:flex-start; align-items:flex-end; font-size:11.5px; font-weight:800; padding-right:44px; }
  .bytime{ display:flex; flex-direction:row; align-items:center; gap:6px; }
  .by{ font-weight:400; color:#666; opacity:1; }
  .sep{ color:#8a8a8a; font-weight:400; }
  .tim{ font-weight:400; color:#7a7a7a; opacity:1; white-space:nowrap; }
  .tim::before{ content:'\00B7'; color:#8a8a8a; margin: 0 4px; }
  .likepill{ border:none; border-radius:0; padding:0; display:inline-flex; align-items:center; gap:4px; background:transparent; position:absolute; right:8px; bottom:8px; font-weight:900; }
  .likepill .icon{ width:1.1em; text-align:center; }

  .category-tag{ position:absolute; top:8px; right:8px; font-size:11px; font-weight:800; background:rgba(255,255,255,.7); border:2px solid var(--ink); border-radius:8px; padding:2px 6px; }

  .fab{ position:absolute; left:50%; bottom:58px; transform:translateX(-50%); width:74px; height:74px;
    border:3px solid var(--ink); border-radius:50%; background:#fff; display:grid; place-items:center;
    box-shadow:0 3px 0 0 var(--ink); cursor:pointer; }
  .fab:active{ transform:translate(-50%,1px); }

  nav{ position:absolute; left:0; right:0; bottom:0; border-top:2px solid var(--ink);
    display:flex; align-items:center; justify-content:space-around; padding:10px 8px 12px; background:#fff; }
  .navbtn{ width:36px; height:36px; border:2px solid var(--ink); border-radius:10px; display:grid; place-items:center; background:#fff; cursor:pointer; }
  .navbtn.disabled{ opacity:.35; cursor:not-allowed; }

  svg{ stroke:var(--ink); stroke-width:2.2; fill:none; }
  .modal .close svg{ stroke:#fff !important; fill:none !important; }

  /* Modals */
  .backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.28); display:none; }
  .modal{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:86%; max-height:82%;
    background:#fff; border:3px solid var(--ink); border-radius:16px; padding:14px; display:none; overflow:auto; }
  .modal header{ border:none; padding:0; margin-bottom:8px; }
  #detailModal header{ display:none; }
  .modal .close{ position:absolute; right:8px; top:8px; width:36px; height:36px; border:2px solid var(--ink); border-radius:50%; background:#000; color:#fff; cursor:pointer; font-weight:900; z-index:120; display:grid; place-items:center; box-shadow:0 2px 0 0 var(--ink);}

  /* Compose form */
  .form-row{ display:flex; flex-direction:column; gap:6px; margin:8px 0; }
  label{ font-weight:800; }
  input[type="text"], textarea, select{ width:100%; border:2px solid var(--ink); border-radius:12px; padding:10px; font-size:14px; background:#fff; }
  textarea{ min-height:120px; resize:vertical; }
  .inline{ display:flex; gap:10px; align-items:center; }
  .inline select{ flex:1; }
  .chip{ display:inline-flex; align-items:center; gap:6px; border:2px solid var(--ink); border-radius:12px; padding:8px 10px; background:#fff; }
  .row-actions{ display:flex; justify-content:flex-end; gap:8px; margin-top:8px; }
  .btn{ border:2px solid var(--ink); border-radius:12px; background:#fff; padding:10px 14px; font-weight:800; cursor:pointer; }
  .btn.primary{ background:#111; color:#fff; }
  .tip{ font-size:12px; opacity:.7; }

  .detail-note{ border:none; border-radius:12px; padding:0; position:relative; background:transparent; }
  .detail-note .catline{ font-size:12px; color:#666; font-weight:800; margin-bottom:4px; }
  .likebar{ display:flex; gap:10px; align-items:center; justify-content:flex-end; margin-top:10px; }
  .likebtn{ border:2px solid var(--ink); border-radius:999px; padding:8px 12px; font-weight:900; background:#fff; cursor:pointer; display:inline-flex; align-items:center; gap:8px; min-width:72px; justify-content:center; }
  .likebtn .icon{font-size:16px; width:1.2em; text-align:center; display:inline-block;}
  .likebtn .cnt{min-width:1ch; text-align:center; display:inline-block;}
  .likebtn.liked{ background:#ffeff3; color:#d31145; border-color:#d31145; }
  .likebtn.liked{ background:#ffeff3; }
  .detail-meta{ font-size:12px; opacity:.8; display:flex; gap:8px; align-items:center; margin-top:6px; }
  .detail-title{ font-weight:900; margin-bottom:6px; }
</style>
</head>
<body>
  <div class="phone" id="app">
    <header>
      <div class="hdr-left">
        <div class="iconbtn" id="btnHome" title="홈">
          <svg viewBox="0 0 24 24" width="22" height="22"><path d="M3 12l9-8 9 8v8H14v-5H10v5H3z"/></svg>
        </div>
        <div class="title">BOARD CAST</div>
      </div>
      <div class="avatarbtn" id="btnProfile" title="프로필">
        <div class="ring"></div><div class="base"></div>
      </div>
    </header>

    <div class="today">Today's Board · Oct 12, 2025</div>

    <!-- PINNED (hero) -->
    <section class="hero" id="heroRow"></section>

    <!-- FEED -->
    <section class="board-wrap">
      <div class="grid" id="feedGrid"></div>
    </section>

    <!-- 글쓰기 버튼 -->
    <button class="fab" id="btnCompose" title="글쓰기">
      <svg viewBox="0 0 24 24" width="36" height="36">
        <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"/>
        <path d="M14.06 4.94l3.75 3.75"/>
      </svg>
    </button>

    <!-- 하단 네비 (표시만) -->
    <nav>
      <div class="navbtn" title="전체보기">
        <svg viewBox="0 0 24 24" width="22" height="22"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
      </div>
      <div class="navbtn disabled" title="(캘린더 준비중)">
        <svg viewBox="0 0 24 24" width="22" height="22"><circle cx="12" cy="12" r="8"/><path d="M12 8v5l3 2"/></svg>
      </div>
      <div class="navbtn disabled" title="랭킹(후순위)">
        <svg viewBox="0 0 24 24" width="22" height="22"><path d="M8 21V10m4 11V3m4 18v-6"/></svg>
      </div>
      <div class="navbtn" title="프로필">
        <svg viewBox="0 0 24 24" width="22" height="22"><circle cx="12" cy="8" r="4"/><path d="M4 20c2-3 6-5 8-5s6 2 8 5"/></svg>
      </div>
    </nav>

    <!-- Backdrop + Modals -->
    <div class="backdrop" id="backdrop"></div>

    <!-- 상세보기 모달 -->
    <div class="modal" id="detailModal" role="dialog" aria-modal="true" aria-labelledby="detailTitle">
      <button class="close" data-close="detail" aria-label="닫기"><svg width="18" height="18" viewBox="0 0 24 24" stroke="white" stroke-width="3" stroke-linecap="round"><path d="M6 6l12 12M6 18L18 6" /></svg></button>
      <header><h3 id="detailTitle">메모 상세</h3></header>
      <div class="detail-note" id="detailCard"></div>
    </div>

    <!-- 글쓰기 모달 -->
    <div class="modal" id="composeModal" role="dialog" aria-modal="true" aria-labelledby="composeTitle">
      <button class="close" data-close="compose" aria-label="닫기"><svg width="18" height="18" viewBox="0 0 24 24" stroke="white" stroke-width="3" stroke-linecap="round"><path d="M6 6l12 12M6 18L18 6" /></svg></button>
      <header><h3 id="composeTitle">메모 붙이기 ✏️</h3></header>
      <form id="composeForm">
        <div class="form-row">
          <label>제목 (최대 40자)</label>
          <input type="text" id="titleInput" maxlength="40" placeholder="짧고 명확하게…" required />
        </div>

        <div class="inline">
          <label class="chip" style="flex:1">
            <span style="width:56px; opacity:.7">카테고리</span>
            <select id="categorySelect">
              <option value="공지">공지</option>
              <option value="이벤트">이벤트</option>
              <option value="잡담">잡담</option>
              <option value="자랑">자랑</option>
              <option value="구인">구인</option>
            </select>
          </label>

          <label class="chip" style="flex:1">
            <span style="width:44px; opacity:.7">색상</span>
            <select id="colorSelect">
              <option value="yellow">노랑</option>
              <option value="mint">민트</option>
              <option value="pink">핑크</option>
              <option value="lav">라벤더</option>
              <option value="blue">하늘</option>
            </select>
          </label>

          <label class="chip" style="white-space:nowrap">
            <input type="checkbox" id="pinCheck" /> 고정
          </label>
        </div>

        <div class="form-row">
          <label>내용 (최대 300자) <span class="tip">(⌘/Ctrl + Enter 저장)</span></label>
          <textarea id="bodyInput" maxlength="300" placeholder="한 장짜리 메모처럼 간단히…" required></textarea>
        </div>

        <div class="inline">
          <label class="chip" style="flex:1">
            <span style="width:56px; opacity:.7">작성자</span>
            <input type="text" id="authorInput" placeholder="@ramzzi" value="@ramzzi" />
          </label>
        </div>

        <div class="row-actions">
          <button type="button" class="btn" data-close="compose">취소</button>
          <button type="submit" class="btn primary">붙이기</button>
        </div>
      </form>
    </div>

  </div>

<script>
  // ---------------- Utilities ----------------
  const qs = (s, el=document)=>el.querySelector(s);
  const qsa = (s, el=document)=>[...el.querySelectorAll(s)];
  const show = el => el.style.display = "block";
  const hide = el => el.style.display = "none";

  const timeAgo = (ts)=>{
    const sec = Math.floor((Date.now() - ts)/1000);
    if(sec < 60) return sec + "s ago";
    const m = Math.floor(sec/60);
    if(m < 60) return m + "m ago";
    const h = Math.floor(m/60);
    if(h < 24) return h + "h ago";
    const d = Math.floor(h/24);
    return d + "d ago";
  };

  function scheduleAgoRerender(){
    // re-render relative times every 30s
    setInterval(()=>{
      qsa('[data-ts]').forEach(el=>{
        const ts = +el.getAttribute('data-ts');
        el.textContent = timeAgo(ts);
      });
    }, 30000);
  }

  // ---------------- State ----------------
  let pinnedNotes = [
    // empty slots initially
  ];
  let feedNotes = [
    {id:"f1", title:"커뮤니티 데이", body:"이번 주 금요일 저녁 8시, 보드캐스트 라이브 AMA 진행합니다! 질문 미리 받아요.", color:"yellow", category:"이벤트", author:"@admin", createdAt: Date.now()-1000*60*30, likes: 3, liked:false},
    {id:"f2", title:"디자인 자랑", body:"포스트잇 그림체로 새 아이콘 세트 완성! 피그마 공유 원하시면 댓글 주세요 :)", color:"pink", category:"자랑", author:"@ramzzi", createdAt: Date.now()-1000*60*80, likes: 7, liked:false},
    {id:"f3", title:"프론트 질문", body:"메모 내용 2~3줄 미리보기까지 보이게 만들었는데, 줄바꿈 처리 팁 있을까요?", color:"lav", category:"잡담", author:"@tomo", createdAt: Date.now()-1000*60*60*5, likes: 2, liked:false},
    {id:"f4", title:"팀원 구인", body:"다음 스프린트 프론트 1명, 백엔드 1명 구해요. 일주일 5시간 기여 가능하신 분!", color:"mint", category:"구인", author:"@soi", createdAt: Date.now()-1000*60*60*8, likes: 5, liked:false},
    {id:"f5", title:"공지", body:"보드 상단 고정 기능이 켜졌어요. 관리자가 📌 누르면 항상 상단에!", color:"blue", category:"공지", author:"@admin", createdAt: Date.now()-1000*60*60*20, likes: 9, liked:false},
  ];
  let idCounter = 100;

  // ---------------- DOM targets ----------------
  const heroRow = qs('#heroRow');
  const feedGrid = qs('#feedGrid');
  const backdrop = qs('#backdrop');
  const modals = { detail: qs('#detailModal'), compose: qs('#composeModal') };
  function openModal(name){ show(backdrop); show(modals[name]); }
  function closeModal(name){ hide(backdrop); hide(modals[name]); }
  function closeAll(){ Object.keys(modals).forEach(closeModal); }

  // ---------------- Renderers ----------------
  function noteHTML(n, small=false){
    const sizeClass = small ? 'small' : '';
    const tag = n.category ? `<div class=\"catline\">${n.category}</div>` : '';
    const title = n.title ? `<div class=\"meta\">${escapeHTML(n.title)}</div>` : '';
    const bodyPreview = n.body ? `<div class="preview">${escapeHTML(n.body)}</div>` : '';
    const footer = `<div class=\"footer\">
                  <div class=\"bytime\">
                    <span class=\"by\">${escapeHTML(n.author || "@anon")}</span>
                    <span class=\"tim\" data-ts=\"${n.createdAt || Date.now()}\">${timeAgo(n.createdAt || Date.now())}</span>
                  </div>
                  <div class=\"likepill\"><span class=\"icon\">${n.liked ? "❤️" : "♡"}</span><span>${n.likes || 0}</span></div>
                </div>`;
    return `<div class=\"note ${sizeClass}\" data-id=\"${n.id}\" data-color=\"${n.color}\" role=\"button\" tabindex=\"0\" aria-label=\"메모 열기: ${escapeHTML(n.title || '')}\">\n              ${!small ? '<div class=\\"pin\\"></div>' : ''}\n              ${tag}\n              ${title}\n              ${bodyPreview}\n              ${footer}\n            </div>`;
  }

  function render(){
    heroRow.innerHTML = (pinnedNotes.length ? pinnedNotes : [{id:"empty1",title:"",body:"",color:"mint"},{id:"empty2",title:"",body:"",color:"yellow"},{id:"empty3",title:"",body:"",color:"blue"}])
      .map(n => noteHTML(n, false)).join('');
    feedGrid.innerHTML = feedNotes.map(n => noteHTML(n, true)).join('');
    bindNoteClicks();
  }

  function bindNoteClicks(){
    qsa('.note').forEach(n => {
      n.addEventListener('click', () => openDetail(n.dataset.id));
      n.addEventListener('keypress', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); openDetail(n.dataset.id);} });
    });
  }

  function findNoteById(id){
    return pinnedNotes.find(n=>n.id==id) || feedNotes.find(n=>n.id==id);
  }

  function openDetail(id){
    const data = findNoteById(id);
    if(!data) return;
    const color = data.color || 'yellow';
    const title = data.title || 'Untitled';
    const body = data.body || '내용이 없습니다.';
    const cat = data.category ? `<div class="catline">${data.category}</div>` : '';
    const created = new Date(data.createdAt || Date.now());
    const card = qs('#detailCard');
    const liked = data.liked ? "liked" : "";

    card.innerHTML = `<div style="background:var(--note-${color}); padding:12px; border-radius:12px; position:relative;">
      ${cat}
      <div class="detail-title">${escapeHTML(title)}</div>
      <div style="white-space:pre-wrap; line-height:1.45">${escapeHTML(body)}</div>
      <div class="detail-meta">
        <span>${escapeHTML(data.author || "@anon")}</span>
        <span>·</span>
        <span>${created.getFullYear()}.${(created.getMonth()+1).toString().padStart(2,'0')}.${created.getDate().toString().padStart(2,'0')} ${created.getHours().toString().padStart(2,'0')}:${created.getMinutes().toString().padStart(2,'0')}</span>
      </div>
      <div class="likebar">
        <button class="likebtn ${liked}" id="likeBtn"><span class="icon">${data.liked ? "❤️" : "♡"}</span> <span class="cnt">${data.likes || 0}</span></button>
      </div>
    </div>`;

    // like handler
    const likeBtn = qs('#likeBtn');
    likeBtn.addEventListener('click', (e)=>{
      data.liked = !data.liked;
      if(data.liked){ data.likes = (data.likes||0) + 1; }
      else{ data.likes = Math.max(0, (data.likes||0) - 1); }
      likeBtn.classList.toggle('liked', data.liked);
      likeBtn.querySelector('.icon').textContent = data.liked ? '❤️' : '♡';
      likeBtn.querySelector('.cnt').textContent = String(data.likes);
      render();
    });

    openModal('detail');
  }

  function escapeHTML(str){
    return String(str).replace(/[&<>"']/g, s => ({
      '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'
    }[s]));
  }

  // ---------------- Interactions ----------------
  qs('#btnHome').addEventListener('click', ()=>{
    closeAll();
    qs('#app').scrollTo({top:0, behavior:"smooth"});
  });

  qs('#btnProfile').addEventListener('click', ()=>{
    alert("프로필/계정 연결은 다음 단계에서 구현할게요!");
  });

  const form = qs('#composeForm');
  const titleInput = qs('#titleInput');
  const bodyInput = qs('#bodyInput');
  const categorySelect = qs('#categorySelect');
  const colorSelect = qs('#colorSelect');
  const pinCheck = qs('#pinCheck');
  const authorInput = qs('#authorInput');

  const btnCompose = qs('#btnCompose');
  btnCompose.addEventListener('click', ()=> openModal('compose'));

  qsa('[data-close]').forEach(btn=> btn.addEventListener('click', ()=> closeModal(btn.dataset.close)));
  backdrop.addEventListener('click', closeAll);
  window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeAll(); });

  bodyInput.addEventListener('keydown', (e)=>{
    if((e.metaKey || e.ctrlKey) && e.key === 'Enter'){
      form.requestSubmit();
    }
  });

  form.addEventListener('submit', (e)=>{
    e.preventDefault();
    const title = titleInput.value.trim();
    const body = bodyInput.value.trim();
    const category = categorySelect.value;
    const color = colorSelect.value;
    const isPinned = pinCheck.checked;
    const author = authorInput.value.trim() || "@anon";

    if(!title || !body){ return; }

    const newNote = {
      id: 'n' + (++idCounter),
      title, body, category, color,
      author,
      createdAt: Date.now(),
      likes: 0,
      liked: false
    };

    if(isPinned){
      if(pinnedNotes.length < 3){
        pinnedNotes.unshift(newNote);
      }else{
        pinnedNotes.pop();
        pinnedNotes.unshift(newNote);
      }
    }else{
      feedNotes.unshift(newNote);
    }

    form.reset();
    colorSelect.value = 'yellow';
    categorySelect.value = '공지';
    authorInput.value = '@ramzzi';
    pinCheck.checked = false;

    closeModal('compose');
    render();
  });

  // initial
  render();
  scheduleAgoRerender();
</script>
</body>
</html>
